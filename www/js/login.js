
var LoginPageController = {
    init : function() {
        $(function() {
            LoginPageController.prepare();
        });
    },

    prepare : function() {
        $('#login').on('tappable-tap', function() {
            LoginPageController.login();
        });

        $('#create').on('tappable-tap', function() {
            LoginPageController.create();
        });

        $('#back').on('tappable-tap', function() {
            location.href = 'index.html';
        });
    },

    login : function() {
        var userName = $('#user-name').val();
        var password = $('#password').val();

        ncmb.User.login(userName, password)
            .then(function(user) {
                // 成功
                alert("ログインに成功しました");
                location.href = 'user.html';
            })
            .catch(function(error) {
                // エラー
                alert("ログインに失敗しました");
                console.log(JSON.stringify(arguments));
            });
    },

    create : function() {
        var userName = "user";
        var password = "pass";

        new ncmb.User({userName : userName, password : password, memo : "generated by test app"})
            .signUpByAccount()
            .then(function() {
                alert("テストユーザーが登録されました\nuserName: user, password: pass");
            });
    }
};
